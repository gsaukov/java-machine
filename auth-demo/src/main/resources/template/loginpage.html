<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="http://localhost:9020/static/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

    <script src="http://localhost:9020/static/js/external/jquery-3.3.1.min.js"></script>
    <script src="http://localhost:9020/static/js/external/popper.min.js" ></script>
    <script src="http://localhost:9020/static/js/external/bootstrap.min.js"></script>

    <style>
        html {
            overscroll-behavior: auto;
        }

        html body {
            width: 2070px;
            padding-right: 0 !important;
            background-color: #0b0e16;
            color: #a1afc3;
        }

        .carousel-item {
            height: 800px;
        }
    </style>

    <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '2930956966914426',
              cookie     : true,
              xfbml      : true,
              version    : 'v5.0'
            });
            FB.AppEvents.logPageView();
          };

          (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             js.src = "https://connect.facebook.net/en_US/sdk.js";
             fjs.parentNode.insertBefore(js, fjs);
          }(document, 'script', 'facebook-jssdk'));

        var accessToken;
          function checkLoginState() {
              FB.getLoginStatus(function(response) {
                  if (response.status === 'connected') {
                  	document.getElementById('fbstatus').innerHTML = 'Connected.';
                    accessToken = response.authResponse.accessToken;
                    console.log(accessToken)
                  }

              });
          }
    </script>
    <!--https://graph.facebook.com/me?fields=id,name,picture&access_token=EAAppsJjdaXoBAER7aaQzKiv9KUxb6Ic10xNSgdp0NkdPRnkGGwIRJ5JSZCgz5EtQ1LQZCllVRaAPZC4jS8W9FFs189QKUjXWbPOQz7PFebIVhZClBdMyEeGqKuyZA0IIgpGCD7EBirJsv2A3CJh1luZCDtTlBfZCjpbrFeT2XKCq8Vyuy0ZAEUSI4zHHgAZC0ZASjKIzMMbdrHtwZDZD-->



    <script>
		// getting basic user info
		function getInfo() {
			FB.api('/me', 'GET', {fields: 'email,first_name,last_name,name,id,picture.width(300).height(300)'}, function(response) {
				document.getElementById('fbuserpicture').innerHTML = "<img src='" + response.picture.data.url + "'>";
                document.getElementById('fbemail').innerHTML = response.email;
                document.getElementById('fbusername').innerHTML = response.first_name + " " + response.last_name ;
                document.getElementById('fbuserid').innerHTML = response.id;
			});
		}
	</script>

    <!--function HandlePopupResult(result) {-->
    <!--alert("result of popup is: " + result);-->
    <!--}-->

    <!--In the child window code add this:-->

    <!--function CloseMySelf(sender) {-->
    <!--try {-->
    <!--window.opener.HandlePopupResult(sender.getAttribute("result"));-->
    <!--}-->
    <!--catch (err) {}-->
    <!--window.close();-->
    <!--return false;-->
    <!--}-->
</head>
<body>

    <div class="row justify-content-left align-self-start" style="margin-top: 1em; margin-left: 1em;">
        <div class="col-2">
            <div class="form-group">
                <form th:action="@{/justitia-api/user/login}" method="POST" >
                    <fieldset class="form-group">
                        <label for="username" style="font-size: 40px;" >Login:</label>
                        <input id="username" class="form-control" name="username" style="filter: none;">
                        <label for="password" style="font-size: 40px;" >Password:</label>
                        <input id="password" class="form-control" name="password" type="password" style="filter: none;">
                    </fieldset>
                    <div class="row" style="margin-top: 0; margin-left: 0;">
                        <select id="authtype" class="form-control" style="width: 12em; font-size: 20px; margin-right: 5px; height: 42px">
                            <option value="BASIC">BASIC</option>
                            <option value="FORM">FORM</option>
                            <option value="CREDENTIALS">TOKEN CREDENTIALS</option>
                            <option value="CODE">TOKEN CODE</option>
                        </select>
                        <input type="submit" value="Login" class="btn btn-default" style="font-size: 19px; height: 42px">
                    </div>
                </form>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <div>
<!--                        <fb:login-button data-size="large" data-button-type="login_with" scope="public_profile,email" onlogin="checkLoginState();"> </fb:login-button>-->
                        <div class="fb-login-button" data-width="" data-size="large" data-button-type="login_with" data-auto-logout-link="false" data-use-continue-as="true" autologoutlink="true" onlogin="checkLoginState();"></div>
                    </div>
                    <div>
                        <input type="submit" value="Get Info" class="btn btn-default" onclick="getInfo()" style="margin-top: 10px; font-size: 19px; height: 42px">
                    </div>
                </div>
                <div class="col-sm">
                    <div id="fbuserpicture"></div>
                </div>
                <div class="col-sm">
                    <div id="fbstatus" style="margin-top: 5px; font-size: 19px;"></div>
                    <div id="fbuserid" style="margin-top: 5px; font-size: 19px;"></div>
                    <div id="fbusername" style="margin-top: 5px; font-size: 19px;"></div>
                    <div id="fbemail" style="margin-top: 5px; font-size: 19px;"></div>
                </div>
            </div>
        </div>
<!--        <div class="fb-login-button" data-width="" data-size="large" data-button-type="continue_with" data-auto-logout-link="false" data-use-continue-as="false"></div>-->
    </div>

    <div id="slides" class="carousel slide" data-ride="carousel" >
        <ol class="carousel-indicators">
            <li data-target="#slides" data-slide-to="0" class="active"></li>
            <li data-target="#slides" data-slide-to="1"></li>
            <li data-target="#slides" data-slide-to="2"></li>
            <li data-target="#slides" data-slide-to="3"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="https://kor.ill.in.ua/m/610x386/2456343.jpg" alt="First slide">
                <div class="carousel-caption d-none d-md-block">
                    <h5>First slide label</h5>
                    <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="https://kor.ill.in.ua/m/610x386/2456343.jpg" alt="Second slide">
                <div class="carousel-caption d-none d-md-block">
                    <h5>First slide label</h5>
                    <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="https://kor.ill.in.ua/m/610x386/2456343.jpg" alt="Third slide">
                <div class="carousel-caption d-none d-md-block">
                    <h5>First slide label</h5>
                    <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>
                </div>
            </div>

            <div class="carousel-item">

                <div class="row">
                    <div class="col-md-4">
                        <div class="card mb-2">
                            <img class="card-img-top" src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/4-col/img%20(34).jpg"
                                 alt="Card image cap">
                            <div class="card-body">
                                <h4 class="card-title">Card title</h4>
                                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                                    card's content.</p>
                                <a class="btn btn-primary">Button</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 clearfix d-none d-md-block">
                        <div class="card mb-2">
                            <img class="card-img-top" src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/4-col/img%20(18).jpg"
                                 alt="Card image cap">
                            <div class="card-body">
                                <h4 class="card-title">Card title</h4>
                                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                                    card's content.</p>
                                <a class="btn btn-primary">Button</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 clearfix d-none d-md-block">
                        <div class="card mb-2">
                            <img class="card-img-top" src="https://mdbootstrap.com/img/Photos/Horizontal/Nature/4-col/img%20(35).jpg"
                                 alt="Card image cap">
                            <div class="card-body">
                                <h4 class="card-title">Card title</h4>
                                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the
                                    card's content.</p>
                                <a class="btn btn-primary">Button</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
        <a class="carousel-control-prev" href="#slides" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#slides" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
        <script>
            $('.carousel').carousel({
                interval: false
            })
        </script>
        <script>
            // remember last slide posisition;
            $('.carousel').bind('slide.bs.carousel', function(e){
                var slideFrom = $(this).find('.active').index();
                var slideTo = $(e.relatedTarget).index();
                console.log(slideFrom+' => '+slideTo);
                localStorage.setItem('slide', slideTo)
            });
        </script>
        <script>
            var slide = localStorage.getItem('slide');
            if (slide === null) {
                // do nothing
            } else {
                // return to last saved slide
                $('.carousel').carousel(parseInt(slide));
            }
        </script>

    </div>

    <div class="container">
        <div class="row">
            <input id="consoleMessage" class="form-control" name="message" style="filter: none;">
            <input type="submit" value="Message" class="btn btn-default" onclick="output($('#consoleMessage').val()); $('#consoleMessage').val('');" style="font-size: 19px; height: 42px">
            <input type="submit" value="Clear" class="btn btn-default" onclick="$('#console').empty(); localStorage.removeItem('wellData');" style="font-size: 19px; height: 42px">
        </div>
    </div>

    <div id="console" class="well"/>

    <script>
		function initWell() {
            var wellData = JSON.parse(localStorage.getItem('wellData')) || [];
            wellData.forEach(element => $('#console').prepend($(element)));
        }

        initWell();
	</script>

    <script>
        function output(message) {
            var consoleMessage = "<div><span class='time'>" +  Date.now() + " " + message + "</span></div>";
            var element = $(consoleMessage);
            addToArrayStorage('wellData', consoleMessage)
            $('#console').prepend(element);
        }
    </script>

    <script>
        function addToArrayStorage (itemName, element) {
            var arr = JSON.parse(localStorage.getItem(itemName)) || [];
            arr.push(element);
            localStorage.setItem(itemName, JSON.stringify(arr));
        }
    </script>

</body>
</html>