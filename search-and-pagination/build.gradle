plugins {
    id 'org.springframework.boot'
    id 'java'
}

apply plugin: 'io.spring.dependency-management'

group 'com.apps'
version '1.0'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile project(':misc')
    compile 'org.liquibase:liquibase-core'
    compile 'org.springframework.boot:spring-boot-starter-thymeleaf'
    compile 'org.springframework.boot:spring-boot-starter-data-jpa'
    compile group: 'javax.persistence', name: 'javax.persistence-api'
    compile 'org.springframework.data:spring-data-commons'
    compile group: 'com.h2database', name: 'h2'
    compile group: 'org.joda', name: 'joda-money', version: '1.0.1'
    compile 'fr.dudie:nominatim-api:3.3'
    compile 'org.springframework.data:spring-data-cassandra:2.1.8.RELEASE'
    compile 'com.datastax.cassandra:cassandra-driver-core:3.7.1'
    compile 'org.cassandraunit:cassandra-unit-spring:3.11.2.0'
    compile 'org.cassandraunit:cassandra-unit-shaded:3.11.2.0'
    compile 'org.hectorclient:hector-core:2.0-0'
    compile 'io.dropwizard.metrics:metrics-core:3.2.2'
    compile 'com.datastax.cassandra:cassandra-driver-mapping:2.1.1'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testCompile 'org.testng:testng:6.9.10'
    annotationProcessor('org.hibernate:hibernate-jpamodelgen')
}

sourceSets {
    main { 
        java {
            srcDirs += ['src/resources']
            srcDirs += ['src/generated/java']
        }
    }
}

tasks.withType(JavaCompile) {
    options.annotationProcessorGeneratedSourcesDirectory = file("src/generated/java")
}


task testng(type: Test) {
    useTestNG()
}

check.dependsOn testng